{% extends 'base.html' %}

{% block header %}
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script>
    var source = new EventSource("/progress");
    source.onmessage = function(event) {
        $('.progress-bar').css('width', event.data+'%').attr('aria-valuenow', event.data);
        $('.progress-bar-label').text(event.data+'%');

        if(event.data == 100){
            source.close()
        }
    }
  </script>
  <h1>{% block title %}Load Data{% endblock %}</h1>
{% endblock %}

{% block content %}
  <form action="/load_items/" method="post">
    <button class="action" name="loadButton" type="submit">Load Items</button>
  </form>

  <div class="progress">
    <p class="progress-bar-label"></p>
    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
{% endblock %}


