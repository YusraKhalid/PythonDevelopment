{% extends "base.html" %}
{% block content %}
<table class="table" style="counter-reset: serial-number;">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Product</th>
      <th scope="col">Quantity</th>
      <th scope="col">Price</th>
    </tr>
  </thead>
  <tbody>
  {% for cart_item in cart_items %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ cart_item.product.name }}</td>
      <td>{{ cart_item.quantity }}</td>
      <td>{{ cart_item.sku_price }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<h2>Total Items:&nbsp;{{number_of_products}}</h2>
<h2>Buy for: Â£{{cart_total_gbp}}</h2>

<form action="{% url 'charge' %}" method="post">
  {% csrf_token %}
  <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
          data-key="{{ key }}"
          data-description="A Django Charge"
          data-amount="{{cart_total}}"
          data-currency="gbp"
          data-locale="auto">
  </script>
</form>
{% endblock content %}
