'''
Only add en as default if en is main language for that region or
main language for that region is from one of these [ar, hi, ur, fa]
lang to country maps
http://www.lingoes.net/en/translator/langcode.htm
http://download.geonames.org/export/dump/countryInfo.txt
'''

MARKET_LANG_MAP = {
    'AD': {'other': ['es'], 'default': 'ca'},
    'AE': {'other': ['ar'], 'default': 'en'},
    'AL': {'default': 'sq'},
    'AM': {'default': 'hy'},
    'AO': {'default': 'pt'},
    'AU': {'default': 'en'},
    'AT': {'default': 'de'},
    'AW': {'other': ['es'], 'default': 'nl'},
    'AZ': {'other': ['tr'], 'default': 'az'},
    'BA': {'default': 'bs'},
    'BE': {'other': ['fr', 'de'], 'default': 'nl'},
    'BF': {'default': 'fr'},
    'BH': {'other': ['ar'], 'default': 'en'},
    'BG': {'default': 'bg'},
    'BJ': {'default': 'fr'},
    'BR': {'default': 'pt'},
    'BM': {'default': 'en'},
    'BY': {'other': ['ru'], 'default': 'be'},
    'CA': {'default': 'en'},
    'CH': {'other': ['fr'], 'default': 'de'},
    'CI': {'default': 'fr'},
    'CL': {'other':['fr'],'default': 'es'},
    'CM': {'default': 'fr'},
    'CN': {'other': ['cn'], 'default': 'zh'},
    'CO': {'default': 'es'},
    'CR': {'default': 'es'},
    'CY': {'default': 'el'},
    'CZ': {'default': 'cs'},
    'DE': {'default': 'de', 'other': ['fr']},
    'DK': {'default': 'da'},
    'DO': {'default': 'es'},
    'DZ': {'other': ['fr']},
    'EC': {'default': 'es'},
    'EE': {'default': 'et', 'other': ['ru']},
    'EG': {'other': ['ar'], 'default': 'en'},
    'ES': {'default': 'es'},
    'EU': {'default': 'en'},
    'FI': {'default': 'fi'},
    'FR': {'default': 'fr'},
    'GE': {'default': 'ka'},
    'GF': {'default': 'fr'},
    'GH': {'default': 'en'},
    'GI': {'default': 'en'},
    'GP': {'default': 'fr'},
    'GR': {'default': 'el'},
    'GT': {'default': 'es'},
    'HK': {'default': 'zh'},
    'HN': {'default': 'es'},
    'HR': {'default': 'hr'},
    'HU': {'default': 'hu'},
    'IC': {'other': ['es']},
    'ID': {'default': 'id'},
    'IE': {'default': 'en'},
    'IL': {'default': 'he'},
    'IN': {'default': 'en'},
    'IQ': {'default': 'en'},
    'IR': {'default': 'en'},
    'IS': {'default': 'is'},
    'IT': {'other': ['es'], 'default': 'it'},
    'JO': {'other': ['ar'], 'default': 'en'},
    'JP': {'default': 'ja'},
    'KG': {'default': 'ru'},
    'KH': {'default': 'en', 'other': ['fr']},
    'KR': {'default': 'ko'},
    'KW': {'other': ['ar'], 'default': 'en'},
    'KY': {'default': 'en'},
    'KZ': {'other': ['ru'], 'default': 'kk'},
    'LB': {'other': ['ar'], 'default': 'en'},
    'LK': {'default': 'en', 'other': ['si']},
    'LI': {'default': 'de'},
    'LT': {'default': 'lt'},
    'LU': {'other': ['fr'], 'default': 'de'},
    'LV': {'default': 'lv'},
    'LY': {'default': 'en'},
    'MA': {'default': 'fr'},
    'MC': {'default': 'fr'},
    'MK': {'default': 'mk'},
    'MN': {'default': 'mn'},
    'MO': {'other': ['zt'], 'default': 'zh'},
    'MQ': {'default': 'fr'},
    'MT': {'default': 'mt'},
    'MX': {'default': 'es'},
    'MU': {'other': ['fr'], 'default': 'en'},
    'MV': {'other': ['dv'], 'default': 'en'},
    'MY': {'default': 'ms'},
    'NI': {'default': 'es'},
    'NC': {'default': 'fr'},
    'NG': {'default': 'en'},
    'NL': {'other': ['de'], 'default': 'nl'},
    'NO': {'default': 'no'},
    'NZ': {'default': 'en'},
    'OM': {'default': 'en'},
    'PA': {'default': 'es'},
    'PE': {'default': 'es'},
    'PH': {'default': 'en'},
    'PK': {'default': 'en'},
    'PL': {'other': ['de'], 'default': 'pl'},
    'PT': {'other': ['fr'], 'default': 'pt'},
    'QA': {'other': ['ar'], 'default': 'en'},
    'RE': {'default': 'fr'},
    'RO': {'default': 'ro'},
    'RU': {'default': 'ru'},
    'SA': {'other': ['ar'], 'default': 'en'},
    'SE': {'other': ['se'], 'default': 'sv'},
    'SI': {'default': 'sl'},
    'SG': {'default': 'en', 'other': ['zh']},
    'SK': {'default': 'sk'},
    'SN': {'default': 'fr'},
    'SR': {'default': 'nl'},
    'SV': {'default': 'es'},
    'SY': {'default': 'en'},
    'TH': {'default': 'th'},
    'TN': {'other': ['fr']},
    'TR': {'default': 'tr'},
    'TW': {'default': 'zh'},
    'UA': {'other': ['ru'], 'default': 'uk'},
    'UK': {'default': 'en'},
    'US': {'default': 'en'},
    'UZ': {'default': 'en', 'other': ['ru']},
    'UY': {'default': 'es', 'other': ['ru']},
    'VE': {'default': 'es'},
    'VN': {'default': 'vi'},
    'ZA': {'default': 'zu'},
    'RS': {'default': 'sr'},
    'LR': {'default': 'en'},
    'MG': {},
    'TJ': {'other': ['ru']},
    'TM': {'other': ['ru']},
    'BN': {'default': 'ms'},
    'PY': {},
    'AR': {'default': 'es'},
    'VA': {'default': 'en', 'other': ['it']},
    'MD': {},
    'ME': {},
    'SM': {'default': 'en', 'other': ['it']},
    'YE': {},
    'MZ': {},
    'XK': {},
}


def get_spider_lang(spider):
    lang = getattr(spider, 'lang', None)
    market = getattr(spider, 'market', None)
    market_lang = MARKET_LANG_MAP.get(market, {}).get('default')
    return lang or market_lang
