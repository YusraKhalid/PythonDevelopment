{% extends "memoapp/base.html" %}
{% block page_title %}Memo Book{% endblock page_title %}
{% load static %}
    <!-- Body contents are starting from here -->
{% block body %}
    <div class="container">
        <div class="row">
			<div class="col-md-6 col-md-offset-3">
				<div class="panel panel-login">
					<div class="panel-heading">
                        <form id="register-form" action="/addmemo" method="post" enctype="multipart/form-data" role="form" style="display: block">
                            {% csrf_token %}
                            {{ memo_form }}

                            <div class="form-group">
                                <div class="row">
                                    <div class="col-sm-6 col-sm-offset-3">
                                        <input type="submit" name="register-submit" id="register-submit" tabindex="4" class="form-control btn btn-register" value="Add Memory">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="row">
                        <div class="span12">
                            <form id="custom-search-form" action="/search" method="post" class="form-search form-horizontal pull-right">
                                 {% csrf_token %}
                                <div class="input-append span12">
                                    <input type="text" name="tosearch" class="search-query" placeholder="Search">
                                    <button type="submit" class="btn"><i class="icon-search"></i></button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <br>

                    <div class="row" >

                    {% if memos %}
                        {% for memo in memos %}

                            <div class="jumbotron" style="padding: 5px">
                                    <img width="100px" height="100px" src="{% get_media_prefix %}{{  memo.image  }} " style="float: left;margin: 5px"> <img>
                                    <p> <b>{{ memo.title }}</b> </p>
                                <div ><i> {{ memo.text }}</i>
                                    <a href="{{ memo.url }}"> visit </a>
                                    <p> {{ memo.tags }}</p>
                                    <div class="row" >
                                        <div class="col-md-2">
                                            <form action="/deletememo" method="post">
                                                 {% csrf_token %}
                                                <input type="hidden" name="memo_id" value="{{ memo.id }}" />
                                                <input type="submit" class="btn" value="Delete">
                                            </form>
                                        </div>

                                            <div class="col-md-2">
                                            <form action="/editmemo" method="get">
                                                <input type="hidden" name="memo_id" value="{{ memo.id }}" />
                                                <input type="submit" class="btn" value="Edit">
                                            </form>
                                        </div>

                                    </div>
                            </div>
                            </div>
                        {% endfor %}



                        <div class="pagination">
                            <span class="step-links">
                                {% if memos.has_previous %}
                                    <a href="?tosearch={{ text }}&page_no={{ memos.previous_page_number }}">previous</a>
                                {% endif %}

                                <span class="current">
                                    Page {{ memos.number }} of {{ memos.paginator.num_pages }}.
                                </span>

                                {% if memos.has_next %}
                                    <a href="?tosearch={{ text }}&page_no={{ memos.next_page_number }}">next</a>
                                {% endif %}
                            </span>
                        </div>
                    {% else %}
                        <p> No Mem found </p>
                    {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}

