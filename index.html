<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ajax Demo</title>
</head>
<body>
    <div style='text-align: center; border: 2px solid; padding: 5px;'>
        <h1>Select a demo</h1>
        <button class="btn-index" value="ajax-simple">ajax-simple</button>
        <button class="btn-index" value="ajax-form">ajax-form</button>
    </div>
    
    <div id="disp-index"></div>

    <script>
        let elementsArray = document.getElementsByClassName('btn-index')
        for (i = 0; i < elementsArray.length; i++) {
            let ele = elementsArray[i]
            elementsArray[i].addEventListener('click', () => {
                let file = ele.value
                let xhr1 = new XMLHttpRequest()
                let xhr2 = new XMLHttpRequest()

                xhr1.open('GET', file + '.html', true)
                xhr2.open('GET', file + '.js', true)

                xhr1.onload = function () {
                    if (xhr1.readyState == 4 && xhr1.status == 200) {
                        document.getElementById('disp-index').innerHTML = xhr1.responseText
                    }
                }
                xhr2.onload = function () {
                    if (xhr1.readyState == 4 && xhr1.status == 200 &&
                        xhr2.readyState == 4 && xhr2.status == 200) {
                        eval(xhr2.responseText)
                    }
                }

                xhr1.send()
                xhr2.send()
            })
        }
        
        
    </script>

    <script id="loadedScript"></script>
</body>
</html>
